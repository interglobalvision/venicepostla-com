!function(window,factory){var lazySizes=function(window,document){"use strict";if(document.getElementsByClassName){var lazySizesConfig,docElem=document.documentElement,Date=window.Date,supportPicture=window.HTMLPictureElement,addEventListener=window.addEventListener,setTimeout=window.setTimeout,requestAnimationFrame=window.requestAnimationFrame||setTimeout,requestIdleCallback=window.requestIdleCallback,regPicture=/^picture$/i,loadEvents=["load","error","lazyincluded","_lazyloaded"],regClassCache={},forEach=Array.prototype.forEach,hasClass=function(ele,cls){return regClassCache[cls]||(regClassCache[cls]=new RegExp("(\\s|^)"+cls+"(\\s|$)")),regClassCache[cls].test(ele.getAttribute("class")||"")&&regClassCache[cls]},addClass=function(ele,cls){hasClass(ele,cls)||ele.setAttribute("class",(ele.getAttribute("class")||"").trim()+" "+cls)},removeClass=function(ele,cls){var reg;(reg=hasClass(ele,cls))&&ele.setAttribute("class",(ele.getAttribute("class")||"").replace(reg," "))},addRemoveLoadEvents=function(dom,fn,add){var action=add?"addEventListener":"removeEventListener";add&&addRemoveLoadEvents(dom,fn),loadEvents.forEach(function(evt){dom[action](evt,fn)})},triggerEvent=function(elem,name,detail,noBubbles,noCancelable){var event=document.createEvent("CustomEvent");return event.initCustomEvent(name,!noBubbles,!noCancelable,detail||{}),elem.dispatchEvent(event),event},updatePolyfill=function(el,full){var polyfill;!supportPicture&&(polyfill=window.picturefill||lazySizesConfig.pf)?polyfill({reevaluate:!0,elements:[el]}):full&&full.src&&(el.src=full.src)},getCSS=function(elem,style){return(getComputedStyle(elem,null)||{})[style]},getWidth=function(elem,parent,width){for(width=width||elem.offsetWidth;width<lazySizesConfig.minSize&&parent&&!elem._lazysizesWidth;)width=parent.offsetWidth,parent=parent.parentNode;return width},rAF=function(){var running,waiting,fns=[],run=function(){var fn;for(running=!0,waiting=!1;fns.length;)fn=fns.shift(),fn[0].apply(fn[1],fn[2]);running=!1},rafBatch=function(fn){running?fn.apply(this,arguments):(fns.push([fn,this,arguments]),waiting||(waiting=!0,(document.hidden?setTimeout:requestAnimationFrame)(run)))};return rafBatch._lsFlush=run,rafBatch}(),rAFIt=function(fn,simple){return simple?function(){rAF(fn)}:function(){var that=this,args=arguments;rAF(function(){fn.apply(that,args)})}},throttle=function(fn){var running,lastTime=0,rICTimeout=666,run=function(){running=!1,lastTime=Date.now(),fn()},idleCallback=requestIdleCallback?function(){requestIdleCallback(run,{timeout:rICTimeout}),666!==rICTimeout&&(rICTimeout=666)}:rAFIt(function(){setTimeout(run)},!0);return function(isPriority){var delay;(isPriority=!0===isPriority)&&(rICTimeout=44),running||(running=!0,delay=125-(Date.now()-lastTime),delay<0&&(delay=0),isPriority||delay<9&&requestIdleCallback?idleCallback():setTimeout(idleCallback,delay))}},debounce=function(func){var timeout,timestamp,run=function(){timeout=null,func()},later=function(){var last=Date.now()-timestamp;last<99?setTimeout(later,99-last):(requestIdleCallback||run)(run)};return function(){timestamp=Date.now(),timeout||(timeout=setTimeout(later,99))}},loader=function(){var lazyloadElems,preloadElems,isCompleted,resetPreloadingTimer,loadMode,started,eLvW,elvH,eLtop,eLleft,eLright,eLbottom,defaultExpand,preloadExpand,hFac,regImg=/^img$/i,regIframe=/^iframe$/i,supportScroll="onscroll"in window&&!/glebot/.test(navigator.userAgent),currentExpand=0,isLoading=0,lowRuns=-1,resetPreloading=function(e){isLoading--,e&&e.target&&addRemoveLoadEvents(e.target,resetPreloading),(!e||isLoading<0||!e.target)&&(isLoading=0)},isNestedVisible=function(elem,elemExpand){var outerRect,parent=elem,visible="hidden"==getCSS(document.body,"visibility")||"hidden"!=getCSS(elem,"visibility");for(eLtop-=elemExpand,eLbottom+=elemExpand,eLleft-=elemExpand,eLright+=elemExpand;visible&&(parent=parent.offsetParent)&&parent!=document.body&&parent!=docElem;)(visible=(getCSS(parent,"opacity")||1)>0)&&"visible"!=getCSS(parent,"overflow")&&(outerRect=parent.getBoundingClientRect(),visible=eLright>outerRect.left&&eLleft<outerRect.right&&eLbottom>outerRect.top-1&&eLtop<outerRect.bottom+1);return visible},checkElements=function(){var eLlen,i,rect,autoLoadElem,loadedSomething,elemExpand,elemNegativeExpand,elemExpandVal,beforeExpandVal;if((loadMode=lazySizesConfig.loadMode)&&isLoading<8&&(eLlen=lazyloadElems.length)){i=0,lowRuns++,null==preloadExpand&&("expand"in lazySizesConfig||(lazySizesConfig.expand=docElem.clientHeight>500&&docElem.clientWidth>500?500:370),defaultExpand=lazySizesConfig.expand,preloadExpand=defaultExpand*lazySizesConfig.expFactor),currentExpand<preloadExpand&&isLoading<1&&lowRuns>2&&loadMode>2&&!document.hidden?(currentExpand=preloadExpand,lowRuns=0):currentExpand=loadMode>1&&lowRuns>1&&isLoading<6?defaultExpand:0;for(;i<eLlen;i++)if(lazyloadElems[i]&&!lazyloadElems[i]._lazyRace)if(supportScroll)if((elemExpandVal=lazyloadElems[i].getAttribute("data-expand"))&&(elemExpand=1*elemExpandVal)||(elemExpand=currentExpand),beforeExpandVal!==elemExpand&&(eLvW=innerWidth+elemExpand*hFac,elvH=innerHeight+elemExpand,elemNegativeExpand=-1*elemExpand,beforeExpandVal=elemExpand),rect=lazyloadElems[i].getBoundingClientRect(),(eLbottom=rect.bottom)>=elemNegativeExpand&&(eLtop=rect.top)<=elvH&&(eLright=rect.right)>=elemNegativeExpand*hFac&&(eLleft=rect.left)<=eLvW&&(eLbottom||eLright||eLleft||eLtop)&&(isCompleted&&isLoading<3&&!elemExpandVal&&(loadMode<3||lowRuns<4)||isNestedVisible(lazyloadElems[i],elemExpand))){if(unveilElement(lazyloadElems[i]),loadedSomething=!0,isLoading>9)break}else!loadedSomething&&isCompleted&&!autoLoadElem&&isLoading<4&&lowRuns<4&&loadMode>2&&(preloadElems[0]||lazySizesConfig.preloadAfterLoad)&&(preloadElems[0]||!elemExpandVal&&(eLbottom||eLright||eLleft||eLtop||"auto"!=lazyloadElems[i].getAttribute(lazySizesConfig.sizesAttr)))&&(autoLoadElem=preloadElems[0]||lazyloadElems[i]);else unveilElement(lazyloadElems[i]);autoLoadElem&&!loadedSomething&&unveilElement(autoLoadElem)}},throttledCheckElements=throttle(checkElements),switchLoadingClass=function(e){addClass(e.target,lazySizesConfig.loadedClass),removeClass(e.target,lazySizesConfig.loadingClass),addRemoveLoadEvents(e.target,rafSwitchLoadingClass)},rafedSwitchLoadingClass=rAFIt(switchLoadingClass),rafSwitchLoadingClass=function(e){rafedSwitchLoadingClass({target:e.target})},changeIframeSrc=function(elem,src){try{elem.contentWindow.location.replace(src)}catch(e){elem.src=src}},handleSources=function(source){var customMedia,parent,sourceSrcset=source.getAttribute(lazySizesConfig.srcsetAttr);(customMedia=lazySizesConfig.customMedia[source.getAttribute("data-media")||source.getAttribute("media")])&&source.setAttribute("media",customMedia),sourceSrcset&&source.setAttribute("srcset",sourceSrcset),customMedia&&(parent=source.parentNode,parent.insertBefore(source.cloneNode(),source),parent.removeChild(source))},lazyUnveil=rAFIt(function(elem,detail,isAuto,sizes,isImg){var src,srcset,parent,isPicture,event,firesLoad;(event=triggerEvent(elem,"lazybeforeunveil",detail)).defaultPrevented||(sizes&&(isAuto?addClass(elem,lazySizesConfig.autosizesClass):elem.setAttribute("sizes",sizes)),srcset=elem.getAttribute(lazySizesConfig.srcsetAttr),src=elem.getAttribute(lazySizesConfig.srcAttr),isImg&&(parent=elem.parentNode,isPicture=parent&&regPicture.test(parent.nodeName||"")),firesLoad=detail.firesLoad||"src"in elem&&(srcset||src||isPicture),event={target:elem},firesLoad&&(addRemoveLoadEvents(elem,resetPreloading,!0),clearTimeout(resetPreloadingTimer),resetPreloadingTimer=setTimeout(resetPreloading,2500),addClass(elem,lazySizesConfig.loadingClass),addRemoveLoadEvents(elem,rafSwitchLoadingClass,!0)),isPicture&&forEach.call(parent.getElementsByTagName("source"),handleSources),srcset?elem.setAttribute("srcset",srcset):src&&!isPicture&&(regIframe.test(elem.nodeName)?changeIframeSrc(elem,src):elem.src=src),(srcset||isPicture)&&updatePolyfill(elem,{src:src})),rAF(function(){elem._lazyRace&&delete elem._lazyRace,removeClass(elem,lazySizesConfig.lazyClass),firesLoad&&!elem.complete||(firesLoad?resetPreloading(event):isLoading--,switchLoadingClass(event))})}),unveilElement=function(elem){var detail,isImg=regImg.test(elem.nodeName),sizes=isImg&&(elem.getAttribute(lazySizesConfig.sizesAttr)||elem.getAttribute("sizes")),isAuto="auto"==sizes;(!isAuto&&isCompleted||!isImg||!elem.src&&!elem.srcset||elem.complete||hasClass(elem,lazySizesConfig.errorClass))&&(detail=triggerEvent(elem,"lazyunveilread").detail,isAuto&&autoSizer.updateElem(elem,!0,elem.offsetWidth),elem._lazyRace=!0,isLoading++,lazyUnveil(elem,detail,isAuto,sizes,isImg))},onload=function(){if(!isCompleted){if(Date.now()-started<999)return void setTimeout(onload,999);var afterScroll=debounce(function(){lazySizesConfig.loadMode=3,throttledCheckElements()});isCompleted=!0,lazySizesConfig.loadMode=3,throttledCheckElements(),addEventListener("scroll",function(){3==lazySizesConfig.loadMode&&(lazySizesConfig.loadMode=2),afterScroll()},!0)}};return{_:function(){started=Date.now(),lazyloadElems=document.getElementsByClassName(lazySizesConfig.lazyClass),preloadElems=document.getElementsByClassName(lazySizesConfig.lazyClass+" "+lazySizesConfig.preloadClass),hFac=lazySizesConfig.hFac,addEventListener("scroll",throttledCheckElements,!0),addEventListener("resize",throttledCheckElements,!0),window.MutationObserver?new MutationObserver(throttledCheckElements).observe(docElem,{childList:!0,subtree:!0,attributes:!0}):(docElem.addEventListener("DOMNodeInserted",throttledCheckElements,!0),docElem.addEventListener("DOMAttrModified",throttledCheckElements,!0),setInterval(throttledCheckElements,999)),addEventListener("hashchange",throttledCheckElements,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(name){document.addEventListener(name,throttledCheckElements,!0)}),/d$|^c/.test(document.readyState)?onload():(addEventListener("load",onload),document.addEventListener("DOMContentLoaded",throttledCheckElements),setTimeout(onload,2e4)),lazyloadElems.length?checkElements():throttledCheckElements()},checkElems:throttledCheckElements,unveil:unveilElement}}(),autoSizer=function(){var autosizesElems,sizeElement=rAFIt(function(elem,parent,event,width){var sources,i,len;if(elem._lazysizesWidth=width,width+="px",elem.setAttribute("sizes",width),regPicture.test(parent.nodeName||""))for(sources=parent.getElementsByTagName("source"),i=0,len=sources.length;i<len;i++)sources[i].setAttribute("sizes",width);event.detail.dataAttr||updatePolyfill(elem,event.detail)}),getSizeElement=function(elem,dataAttr,width){var event,parent=elem.parentNode;parent&&(width=getWidth(elem,parent,width),event=triggerEvent(elem,"lazybeforesizes",{width:width,dataAttr:!!dataAttr}),event.defaultPrevented||(width=event.detail.width)&&width!==elem._lazysizesWidth&&sizeElement(elem,parent,event,width))},updateElementsSizes=function(){var i,len=autosizesElems.length;if(len)for(i=0;i<len;i++)getSizeElement(autosizesElems[i])},debouncedUpdateElementsSizes=debounce(updateElementsSizes);return{_:function(){autosizesElems=document.getElementsByClassName(lazySizesConfig.autosizesClass),addEventListener("resize",debouncedUpdateElementsSizes)},checkElems:debouncedUpdateElementsSizes,updateElem:getSizeElement}}(),init=function(){init.i||(init.i=!0,autoSizer._(),loader._())};return function(){var prop,lazySizesDefaults={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};lazySizesConfig=window.lazySizesConfig||window.lazysizesConfig||{};for(prop in lazySizesDefaults)prop in lazySizesConfig||(lazySizesConfig[prop]=lazySizesDefaults[prop]);window.lazySizesConfig=lazySizesConfig,setTimeout(function(){lazySizesConfig.init&&init()})}(),{cfg:lazySizesConfig,autoSizer:autoSizer,loader:loader,init:init,uP:updatePolyfill,aC:addClass,rC:removeClass,hC:hasClass,fire:triggerEvent,gW:getWidth,rAF:rAF}}}(window,window.document);window.lazySizes=lazySizes,"object"==typeof module&&module.exports&&(module.exports=lazySizes)}(window),function(){"use strict";var HowlerGlobal=function(){this.init()};HowlerGlobal.prototype={init:function(){var self=this||Howler;return self._counter=1e3,self._codecs={},self._howls=[],self._muted=!1,self._volume=1,self._canPlayEvent="canplaythrough",self._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,self.masterGain=null,self.noAudio=!1,self.usingWebAudio=!0,self.autoSuspend=!0,self.ctx=null,self.mobileAutoEnable=!0,self._setup(),self},volume:function(vol){var self=this||Howler;if(vol=parseFloat(vol),self.ctx||setupAudioContext(),void 0!==vol&&vol>=0&&vol<=1){if(self._volume=vol,self._muted)return self;self.usingWebAudio&&self.masterGain.gain.setValueAtTime(vol,Howler.ctx.currentTime);for(var i=0;i<self._howls.length;i++)if(!self._howls[i]._webAudio)for(var ids=self._howls[i]._getSoundIds(),j=0;j<ids.length;j++){var sound=self._howls[i]._soundById(ids[j]);sound&&sound._node&&(sound._node.volume=sound._volume*vol)}return self}return self._volume},mute:function(muted){var self=this||Howler;self.ctx||setupAudioContext(),self._muted=muted,self.usingWebAudio&&self.masterGain.gain.setValueAtTime(muted?0:self._volume,Howler.ctx.currentTime);for(var i=0;i<self._howls.length;i++)if(!self._howls[i]._webAudio)for(var ids=self._howls[i]._getSoundIds(),j=0;j<ids.length;j++){var sound=self._howls[i]._soundById(ids[j]);sound&&sound._node&&(sound._node.muted=!!muted||sound._muted)}return self},unload:function(){for(var self=this||Howler,i=self._howls.length-1;i>=0;i--)self._howls[i].unload();return self.usingWebAudio&&self.ctx&&void 0!==self.ctx.close&&(self.ctx.close(),self.ctx=null,setupAudioContext()),self},codecs:function(ext){return(this||Howler)._codecs[ext.replace(/^x-/,"")]},_setup:function(){var self=this||Howler;if(self.state=self.ctx?self.ctx.state||"running":"running",self._autoSuspend(),!self.usingWebAudio)if("undefined"!=typeof Audio)try{var test=new Audio;void 0===test.oncanplaythrough&&(self._canPlayEvent="canplay")}catch(e){self.noAudio=!0}else self.noAudio=!0;try{var test=new Audio;test.muted&&(self.noAudio=!0)}catch(e){}return self.noAudio||self._setupCodecs(),self},_setupCodecs:function(){var self=this||Howler,audioTest=null;try{audioTest="undefined"!=typeof Audio?new Audio:null}catch(err){return self}if(!audioTest||"function"!=typeof audioTest.canPlayType)return self;var mpegTest=audioTest.canPlayType("audio/mpeg;").replace(/^no$/,""),checkOpera=self._navigator&&self._navigator.userAgent.match(/OPR\/([0-6].)/g),isOldOpera=checkOpera&&parseInt(checkOpera[0].split("/")[1],10)<33;return self._codecs={mp3:!(isOldOpera||!mpegTest&&!audioTest.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!mpegTest,opus:!!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!audioTest.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!audioTest.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!audioTest.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(audioTest.canPlayType("audio/x-m4a;")||audioTest.canPlayType("audio/m4a;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(audioTest.canPlayType("audio/x-mp4;")||audioTest.canPlayType("audio/mp4;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!audioTest.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(audioTest.canPlayType("audio/x-flac;")||audioTest.canPlayType("audio/flac;")).replace(/^no$/,"")},self},_enableMobileAudio:function(){var self=this||Howler,isMobile=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome/i.test(self._navigator&&self._navigator.userAgent);if(!self._mobileEnabled&&self.ctx&&isMobile){self._mobileEnabled=!1,self.mobileAutoEnable=!1,self._mobileUnloaded||44100===self.ctx.sampleRate||(self._mobileUnloaded=!0,self.unload()),self._scratchBuffer=self.ctx.createBuffer(1,1,22050);var unlock=function(e){Howler._autoResume();var source=self.ctx.createBufferSource();source.buffer=self._scratchBuffer,source.connect(self.ctx.destination),void 0===source.start?source.noteOn(0):source.start(0),"function"==typeof self.ctx.resume&&self.ctx.resume(),source.onended=function(){source.disconnect(0),self._mobileEnabled=!0,document.removeEventListener("touchstart",unlock,!0),document.removeEventListener("touchend",unlock,!0),document.removeEventListener("click",unlock,!0);for(var i=0;i<self._howls.length;i++)self._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",unlock,!0),document.addEventListener("touchend",unlock,!0),document.addEventListener("click",unlock,!0),self}},_autoSuspend:function(){var self=this;if(self.autoSuspend&&self.ctx&&void 0!==self.ctx.suspend&&Howler.usingWebAudio){for(var i=0;i<self._howls.length;i++)if(self._howls[i]._webAudio)for(var j=0;j<self._howls[i]._sounds.length;j++)if(!self._howls[i]._sounds[j]._paused)return self;return self._suspendTimer&&clearTimeout(self._suspendTimer),self._suspendTimer=setTimeout(function(){self.autoSuspend&&(self._suspendTimer=null,self.state="suspending",self.ctx.suspend().then(function(){self.state="suspended",self._resumeAfterSuspend&&(delete self._resumeAfterSuspend,self._autoResume())}))},3e4),self}},_autoResume:function(){var self=this;if(self.ctx&&void 0!==self.ctx.resume&&Howler.usingWebAudio)return"running"===self.state&&self._suspendTimer?(clearTimeout(self._suspendTimer),self._suspendTimer=null):"suspended"===self.state?(self.ctx.resume().then(function(){self.state="running";for(var i=0;i<self._howls.length;i++)self._howls[i]._emit("resume")}),self._suspendTimer&&(clearTimeout(self._suspendTimer),self._suspendTimer=null)):"suspending"===self.state&&(self._resumeAfterSuspend=!0),self}};var Howler=new HowlerGlobal,Howl=function(o){var self=this;if(!o.src||0===o.src.length)return void console.error("An array of source files must be passed with any new Howl.");self.init(o)};Howl.prototype={init:function(o){var self=this;return Howler.ctx||setupAudioContext(),self._autoplay=o.autoplay||!1,self._format="string"!=typeof o.format?o.format:[o.format],self._html5=o.html5||!1,self._muted=o.mute||!1,self._loop=o.loop||!1,self._pool=o.pool||5,self._preload="boolean"!=typeof o.preload||o.preload,self._rate=o.rate||1,self._sprite=o.sprite||{},self._src="string"!=typeof o.src?o.src:[o.src],self._volume=void 0!==o.volume?o.volume:1,self._xhrWithCredentials=o.xhrWithCredentials||!1,self._duration=0,self._state="unloaded",self._sounds=[],self._endTimers={},self._queue=[],self._playLock=!1,self._onend=o.onend?[{fn:o.onend}]:[],self._onfade=o.onfade?[{fn:o.onfade}]:[],self._onload=o.onload?[{fn:o.onload}]:[],self._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],self._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],self._onpause=o.onpause?[{fn:o.onpause}]:[],self._onplay=o.onplay?[{fn:o.onplay}]:[],self._onstop=o.onstop?[{fn:o.onstop}]:[],self._onmute=o.onmute?[{fn:o.onmute}]:[],self._onvolume=o.onvolume?[{fn:o.onvolume}]:[],self._onrate=o.onrate?[{fn:o.onrate}]:[],self._onseek=o.onseek?[{fn:o.onseek}]:[],self._onunlock=o.onunlock?[{fn:o.onunlock}]:[],self._onresume=[],self._webAudio=Howler.usingWebAudio&&!self._html5,void 0!==Howler.ctx&&Howler.ctx&&Howler.mobileAutoEnable&&Howler._enableMobileAudio(),Howler._howls.push(self),self._autoplay&&self._queue.push({event:"play",action:function(){self.play()}}),self._preload&&self.load(),self},load:function(){var self=this,url=null;if(Howler.noAudio)return void self._emit("loaderror",null,"No audio support.");"string"==typeof self._src&&(self._src=[self._src]);for(var i=0;i<self._src.length;i++){var ext,str;if(self._format&&self._format[i])ext=self._format[i];else{if("string"!=typeof(str=self._src[i])){self._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}ext=/^data:audio\/([^;,]+);/i.exec(str),ext||(ext=/\.([^.]+)$/.exec(str.split("?",1)[0])),ext&&(ext=ext[1].toLowerCase())}if(ext||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),ext&&Howler.codecs(ext)){url=self._src[i];break}}return url?(self._src=url,self._state="loading","https:"===window.location.protocol&&"http:"===url.slice(0,5)&&(self._html5=!0,self._webAudio=!1),new Sound(self),self._webAudio&&loadBuffer(self),self):void self._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(sprite,internal){var self=this,id=null;if("number"==typeof sprite)id=sprite,sprite=null;else{if("string"==typeof sprite&&"loaded"===self._state&&!self._sprite[sprite])return null;if(void 0===sprite){sprite="__default";for(var num=0,i=0;i<self._sounds.length;i++)self._sounds[i]._paused&&!self._sounds[i]._ended&&(num++,id=self._sounds[i]._id);1===num?sprite=null:id=null}}var sound=id?self._soundById(id):self._inactiveSound();if(!sound)return null;if(id&&!sprite&&(sprite=sound._sprite||"__default"),"loaded"!==self._state){sound._sprite=sprite,sound._ended=!1;var soundId=sound._id;return self._queue.push({event:"play",action:function(){self.play(soundId)}}),soundId}if(id&&!sound._paused)return internal||self._loadQueue("play"),sound._id;self._webAudio&&Howler._autoResume();var seek=Math.max(0,sound._seek>0?sound._seek:self._sprite[sprite][0]/1e3),duration=Math.max(0,(self._sprite[sprite][0]+self._sprite[sprite][1])/1e3-seek),timeout=1e3*duration/Math.abs(sound._rate);if(sound._paused=!1,sound._ended=!1,sound._sprite=sprite,sound._seek=seek,sound._start=self._sprite[sprite][0]/1e3,sound._stop=(self._sprite[sprite][0]+self._sprite[sprite][1])/1e3,sound._loop=!(!sound._loop&&!self._sprite[sprite][2]),sound._seek>=sound._stop)return void self._ended(sound);var node=sound._node;if(self._webAudio){var playWebAudio=function(){self._refreshBuffer(sound);var vol=sound._muted||self._muted?0:sound._volume;node.gain.setValueAtTime(vol,Howler.ctx.currentTime),sound._playStart=Howler.ctx.currentTime,void 0===node.bufferSource.start?sound._loop?node.bufferSource.noteGrainOn(0,seek,86400):node.bufferSource.noteGrainOn(0,seek,duration):sound._loop?node.bufferSource.start(0,seek,86400):node.bufferSource.start(0,seek,duration),timeout!==1/0&&(self._endTimers[sound._id]=setTimeout(self._ended.bind(self,sound),timeout)),internal||setTimeout(function(){self._emit("play",sound._id)},0)};"running"===Howler.state?playWebAudio():(self.once("resume",playWebAudio),self._clearTimer(sound._id))}else{var playHtml5=function(){node.currentTime=seek,node.muted=sound._muted||self._muted||Howler._muted||node.muted,node.volume=sound._volume*Howler.volume(),node.playbackRate=sound._rate;try{var play=node.play();if(play&&"undefined"!=typeof Promise&&(play instanceof Promise||"function"==typeof play.then)?(self._playLock=!0,play.then(function(){self._playLock=!1,internal||self._emit("play",sound._id)}).catch(function(){self._playLock=!1,self._emit("playerror",sound._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.")})):internal||self._emit("play",sound._id),node.playbackRate=sound._rate,node.paused)return void self._emit("playerror",sound._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==sprite||sound._loop?self._endTimers[sound._id]=setTimeout(self._ended.bind(self,sound),timeout):(self._endTimers[sound._id]=function(){self._ended(sound),node.removeEventListener("ended",self._endTimers[sound._id],!1)},node.addEventListener("ended",self._endTimers[sound._id],!1))}catch(err){self._emit("playerror",sound._id,err)}},loadedNoReadyState=window&&window.ejecta||!node.readyState&&Howler._navigator.isCocoonJS;if(node.readyState>=3||loadedNoReadyState)playHtml5();else{var listener=function(){playHtml5(),node.removeEventListener(Howler._canPlayEvent,listener,!1)};node.addEventListener(Howler._canPlayEvent,listener,!1),self._clearTimer(sound._id)}}return sound._id},pause:function(id){var self=this;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"pause",action:function(){self.pause(id)}}),self;for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){self._clearTimer(ids[i]);var sound=self._soundById(ids[i]);if(sound&&!sound._paused&&(sound._seek=self.seek(ids[i]),sound._rateSeek=0,sound._paused=!0,self._stopFade(ids[i]),sound._node))if(self._webAudio){if(!sound._node.bufferSource)continue;void 0===sound._node.bufferSource.stop?sound._node.bufferSource.noteOff(0):sound._node.bufferSource.stop(0),self._cleanBuffer(sound._node)}else isNaN(sound._node.duration)&&sound._node.duration!==1/0||sound._node.pause();arguments[1]||self._emit("pause",sound?sound._id:null)}return self},stop:function(id,internal){var self=this;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"stop",action:function(){self.stop(id)}}),self;for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){self._clearTimer(ids[i]);var sound=self._soundById(ids[i]);sound&&(sound._seek=sound._start||0,sound._rateSeek=0,sound._paused=!0,sound._ended=!0,self._stopFade(ids[i]),sound._node&&(self._webAudio?sound._node.bufferSource&&(void 0===sound._node.bufferSource.stop?sound._node.bufferSource.noteOff(0):sound._node.bufferSource.stop(0),self._cleanBuffer(sound._node)):isNaN(sound._node.duration)&&sound._node.duration!==1/0||(sound._node.currentTime=sound._start||0,sound._node.pause())),internal||self._emit("stop",sound._id))}return self},mute:function(muted,id){var self=this;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"mute",action:function(){self.mute(muted,id)}}),self;if(void 0===id){if("boolean"!=typeof muted)return self._muted;self._muted=muted}for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){var sound=self._soundById(ids[i]);sound&&(sound._muted=muted,sound._interval&&self._stopFade(sound._id),self._webAudio&&sound._node?sound._node.gain.setValueAtTime(muted?0:sound._volume,Howler.ctx.currentTime):sound._node&&(sound._node.muted=!!Howler._muted||muted),self._emit("mute",sound._id))}return self},volume:function(){var vol,id,self=this,args=arguments;if(0===args.length)return self._volume;if(1===args.length||2===args.length&&void 0===args[1]){self._getSoundIds().indexOf(args[0])>=0?id=parseInt(args[0],10):vol=parseFloat(args[0])}else args.length>=2&&(vol=parseFloat(args[0]),id=parseInt(args[1],10));var sound;if(!(void 0!==vol&&vol>=0&&vol<=1))return sound=id?self._soundById(id):self._sounds[0],sound?sound._volume:0;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"volume",action:function(){self.volume.apply(self,args)}}),self;void 0===id&&(self._volume=vol),id=self._getSoundIds(id);for(var i=0;i<id.length;i++)(sound=self._soundById(id[i]))&&(sound._volume=vol,args[2]||self._stopFade(id[i]),self._webAudio&&sound._node&&!sound._muted?sound._node.gain.setValueAtTime(vol,Howler.ctx.currentTime):sound._node&&!sound._muted&&(sound._node.volume=vol*Howler.volume()),self._emit("volume",sound._id));return self},fade:function(from,to,len,id){var self=this;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"fade",action:function(){self.fade(from,to,len,id)}}),self;self.volume(from,id);for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){var sound=self._soundById(ids[i]);if(sound){if(id||self._stopFade(ids[i]),self._webAudio&&!sound._muted){var currentTime=Howler.ctx.currentTime,end=currentTime+len/1e3;sound._volume=from,sound._node.gain.setValueAtTime(from,currentTime),sound._node.gain.linearRampToValueAtTime(to,end)}self._startFadeInterval(sound,from,to,len,ids[i],void 0===id)}}return self},_startFadeInterval:function(sound,from,to,len,id,isGroup){var self=this,vol=from,diff=to-from,steps=Math.abs(diff/.01),stepLen=Math.max(4,steps>0?len/steps:len),lastTick=Date.now();sound._fadeTo=to,sound._interval=setInterval(function(){var tick=(Date.now()-lastTick)/len;lastTick=Date.now(),vol+=diff*tick,vol=Math.max(0,vol),vol=Math.min(1,vol),vol=Math.round(100*vol)/100,self._webAudio?sound._volume=vol:self.volume(vol,sound._id,!0),isGroup&&(self._volume=vol),(to<from&&vol<=to||to>from&&vol>=to)&&(clearInterval(sound._interval),sound._interval=null,sound._fadeTo=null,self.volume(to,sound._id),self._emit("fade",sound._id))},stepLen)},_stopFade:function(id){var self=this,sound=self._soundById(id);return sound&&sound._interval&&(self._webAudio&&sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime),clearInterval(sound._interval),sound._interval=null,self.volume(sound._fadeTo,id),sound._fadeTo=null,self._emit("fade",id)),self},loop:function(){var loop,id,sound,self=this,args=arguments;if(0===args.length)return self._loop;if(1===args.length){if("boolean"!=typeof args[0])return!!(sound=self._soundById(parseInt(args[0],10)))&&sound._loop;loop=args[0],self._loop=loop}else 2===args.length&&(loop=args[0],id=parseInt(args[1],10));for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++)(sound=self._soundById(ids[i]))&&(sound._loop=loop,self._webAudio&&sound._node&&sound._node.bufferSource&&(sound._node.bufferSource.loop=loop,loop&&(sound._node.bufferSource.loopStart=sound._start||0,sound._node.bufferSource.loopEnd=sound._stop)));return self},rate:function(){var rate,id,self=this,args=arguments;if(0===args.length)id=self._sounds[0]._id;else if(1===args.length){var ids=self._getSoundIds(),index=ids.indexOf(args[0]);index>=0?id=parseInt(args[0],10):rate=parseFloat(args[0])}else 2===args.length&&(rate=parseFloat(args[0]),id=parseInt(args[1],10));var sound;if("number"!=typeof rate)return sound=self._soundById(id),sound?sound._rate:self._rate;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"rate",action:function(){self.rate.apply(self,args)}}),self;void 0===id&&(self._rate=rate),id=self._getSoundIds(id);for(var i=0;i<id.length;i++)if(sound=self._soundById(id[i])){sound._rateSeek=self.seek(id[i]),sound._playStart=self._webAudio?Howler.ctx.currentTime:sound._playStart,sound._rate=rate,self._webAudio&&sound._node&&sound._node.bufferSource?sound._node.bufferSource.playbackRate.setValueAtTime(rate,Howler.ctx.currentTime):sound._node&&(sound._node.playbackRate=rate);var seek=self.seek(id[i]),duration=(self._sprite[sound._sprite][0]+self._sprite[sound._sprite][1])/1e3-seek,timeout=1e3*duration/Math.abs(sound._rate);!self._endTimers[id[i]]&&sound._paused||(self._clearTimer(id[i]),self._endTimers[id[i]]=setTimeout(self._ended.bind(self,sound),timeout)),self._emit("rate",sound._id)}return self},seek:function(){var seek,id,self=this,args=arguments;if(0===args.length)id=self._sounds[0]._id;else if(1===args.length){var ids=self._getSoundIds(),index=ids.indexOf(args[0]);index>=0?id=parseInt(args[0],10):self._sounds.length&&(id=self._sounds[0]._id,seek=parseFloat(args[0]))}else 2===args.length&&(seek=parseFloat(args[0]),id=parseInt(args[1],10));if(void 0===id)return self;if("loaded"!==self._state||self._playLock)return self._queue.push({event:"seek",action:function(){self.seek.apply(self,args)}}),self;var sound=self._soundById(id);if(sound){if(!("number"==typeof seek&&seek>=0)){if(self._webAudio){var realTime=self.playing(id)?Howler.ctx.currentTime-sound._playStart:0,rateSeek=sound._rateSeek?sound._rateSeek-sound._seek:0;return sound._seek+(rateSeek+realTime*Math.abs(sound._rate))}return sound._node.currentTime}var playing=self.playing(id);playing&&self.pause(id,!0),sound._seek=seek,sound._ended=!1,self._clearTimer(id),!self._webAudio&&sound._node&&(sound._node.currentTime=seek);var seekAndEmit=function(){
self._emit("seek",id),playing&&self.play(id,!0)};if(playing&&!self._webAudio){var emitSeek=function(){self._playLock?setTimeout(emitSeek,0):seekAndEmit()};setTimeout(emitSeek,0)}else seekAndEmit()}return self},playing:function(id){var self=this;if("number"==typeof id){var sound=self._soundById(id);return!!sound&&!sound._paused}for(var i=0;i<self._sounds.length;i++)if(!self._sounds[i]._paused)return!0;return!1},duration:function(id){var self=this,duration=self._duration,sound=self._soundById(id);return sound&&(duration=self._sprite[sound._sprite][1]/1e3),duration},state:function(){return this._state},unload:function(){for(var self=this,sounds=self._sounds,i=0;i<sounds.length;i++){if(sounds[i]._paused||self.stop(sounds[i]._id),!self._webAudio){/MSIE |Trident\//.test(Howler._navigator&&Howler._navigator.userAgent)||(sounds[i]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),sounds[i]._node.removeEventListener("error",sounds[i]._errorFn,!1),sounds[i]._node.removeEventListener(Howler._canPlayEvent,sounds[i]._loadFn,!1)}delete sounds[i]._node,self._clearTimer(sounds[i]._id)}var index=Howler._howls.indexOf(self);index>=0&&Howler._howls.splice(index,1);var remCache=!0;for(i=0;i<Howler._howls.length;i++)if(Howler._howls[i]._src===self._src){remCache=!1;break}return cache&&remCache&&delete cache[self._src],Howler.noAudio=!1,self._state="unloaded",self._sounds=[],self=null,null},on:function(event,fn,id,once){var self=this,events=self["_on"+event];return"function"==typeof fn&&events.push(once?{id:id,fn:fn,once:once}:{id:id,fn:fn}),self},off:function(event,fn,id){var self=this,events=self["_on"+event],i=0;if("number"==typeof fn&&(id=fn,fn=null),fn||id)for(i=0;i<events.length;i++){var isId=id===events[i].id;if(fn===events[i].fn&&isId||!fn&&isId){events.splice(i,1);break}}else if(event)self["_on"+event]=[];else{var keys=Object.keys(self);for(i=0;i<keys.length;i++)0===keys[i].indexOf("_on")&&Array.isArray(self[keys[i]])&&(self[keys[i]]=[])}return self},once:function(event,fn,id){var self=this;return self.on(event,fn,id,1),self},_emit:function(event,id,msg){for(var self=this,events=self["_on"+event],i=events.length-1;i>=0;i--)events[i].id&&events[i].id!==id&&"load"!==event||(setTimeout(function(fn){fn.call(this,id,msg)}.bind(self,events[i].fn),0),events[i].once&&self.off(event,events[i].fn,events[i].id));return self._loadQueue(event),self},_loadQueue:function(event){var self=this;if(self._queue.length>0){var task=self._queue[0];task.event===event&&(self._queue.shift(),self._loadQueue()),event||task.action()}return self},_ended:function(sound){var self=this,sprite=sound._sprite;if(!self._webAudio&&sound._node&&!sound._node.paused&&!sound._node.ended&&sound._node.currentTime<sound._stop)return setTimeout(self._ended.bind(self,sound),100),self;var loop=!(!sound._loop&&!self._sprite[sprite][2]);if(self._emit("end",sound._id),!self._webAudio&&loop&&self.stop(sound._id,!0).play(sound._id),self._webAudio&&loop){self._emit("play",sound._id),sound._seek=sound._start||0,sound._rateSeek=0,sound._playStart=Howler.ctx.currentTime;var timeout=1e3*(sound._stop-sound._start)/Math.abs(sound._rate);self._endTimers[sound._id]=setTimeout(self._ended.bind(self,sound),timeout)}return self._webAudio&&!loop&&(sound._paused=!0,sound._ended=!0,sound._seek=sound._start||0,sound._rateSeek=0,self._clearTimer(sound._id),self._cleanBuffer(sound._node),Howler._autoSuspend()),self._webAudio||loop||self.stop(sound._id,!0),self},_clearTimer:function(id){var self=this;if(self._endTimers[id]){if("function"!=typeof self._endTimers[id])clearTimeout(self._endTimers[id]);else{var sound=self._soundById(id);sound&&sound._node&&sound._node.removeEventListener("ended",self._endTimers[id],!1)}delete self._endTimers[id]}return self},_soundById:function(id){for(var self=this,i=0;i<self._sounds.length;i++)if(id===self._sounds[i]._id)return self._sounds[i];return null},_inactiveSound:function(){var self=this;self._drain();for(var i=0;i<self._sounds.length;i++)if(self._sounds[i]._ended)return self._sounds[i].reset();return new Sound(self)},_drain:function(){var self=this,limit=self._pool,cnt=0,i=0;if(!(self._sounds.length<limit)){for(i=0;i<self._sounds.length;i++)self._sounds[i]._ended&&cnt++;for(i=self._sounds.length-1;i>=0;i--){if(cnt<=limit)return;self._sounds[i]._ended&&(self._webAudio&&self._sounds[i]._node&&self._sounds[i]._node.disconnect(0),self._sounds.splice(i,1),cnt--)}}},_getSoundIds:function(id){var self=this;if(void 0===id){for(var ids=[],i=0;i<self._sounds.length;i++)ids.push(self._sounds[i]._id);return ids}return[id]},_refreshBuffer:function(sound){var self=this;return sound._node.bufferSource=Howler.ctx.createBufferSource(),sound._node.bufferSource.buffer=cache[self._src],sound._panner?sound._node.bufferSource.connect(sound._panner):sound._node.bufferSource.connect(sound._node),sound._node.bufferSource.loop=sound._loop,sound._loop&&(sound._node.bufferSource.loopStart=sound._start||0,sound._node.bufferSource.loopEnd=sound._stop||0),sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate,Howler.ctx.currentTime),self},_cleanBuffer:function(node){var self=this;if(Howler._scratchBuffer&&node.bufferSource){node.bufferSource.onended=null,node.bufferSource.disconnect(0);try{node.bufferSource.buffer=Howler._scratchBuffer}catch(e){}}return node.bufferSource=null,self}};var Sound=function(howl){this._parent=howl,this.init()};Sound.prototype={init:function(){var self=this,parent=self._parent;return self._muted=parent._muted,self._loop=parent._loop,self._volume=parent._volume,self._rate=parent._rate,self._seek=0,self._paused=!0,self._ended=!0,self._sprite="__default",self._id=++Howler._counter,parent._sounds.push(self),self.create(),self},create:function(){var self=this,parent=self._parent,volume=Howler._muted||self._muted||self._parent._muted?0:self._volume;return parent._webAudio?(self._node=void 0===Howler.ctx.createGain?Howler.ctx.createGainNode():Howler.ctx.createGain(),self._node.gain.setValueAtTime(volume,Howler.ctx.currentTime),self._node.paused=!0,self._node.connect(Howler.masterGain)):(self._node=new Audio,self._errorFn=self._errorListener.bind(self),self._node.addEventListener("error",self._errorFn,!1),self._loadFn=self._loadListener.bind(self),self._node.addEventListener(Howler._canPlayEvent,self._loadFn,!1),self._node.src=parent._src,self._node.preload="auto",self._node.volume=volume*Howler.volume(),self._node.load()),self},reset:function(){var self=this,parent=self._parent;return self._muted=parent._muted,self._loop=parent._loop,self._volume=parent._volume,self._rate=parent._rate,self._seek=0,self._rateSeek=0,self._paused=!0,self._ended=!0,self._sprite="__default",self._id=++Howler._counter,self},_errorListener:function(){var self=this;self._parent._emit("loaderror",self._id,self._node.error?self._node.error.code:0),self._node.removeEventListener("error",self._errorFn,!1)},_loadListener:function(){var self=this,parent=self._parent;parent._duration=Math.ceil(10*self._node.duration)/10,0===Object.keys(parent._sprite).length&&(parent._sprite={__default:[0,1e3*parent._duration]}),"loaded"!==parent._state&&(parent._state="loaded",parent._emit("load"),parent._loadQueue()),self._node.removeEventListener(Howler._canPlayEvent,self._loadFn,!1)}};var cache={},loadBuffer=function(self){var url=self._src;if(cache[url])return self._duration=cache[url].duration,void loadSound(self);if(/^data:[^;]+;base64,/.test(url)){for(var data=atob(url.split(",")[1]),dataView=new Uint8Array(data.length),i=0;i<data.length;++i)dataView[i]=data.charCodeAt(i);decodeAudioData(dataView.buffer,self)}else{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.withCredentials=self._xhrWithCredentials,xhr.responseType="arraybuffer",xhr.onload=function(){var code=(xhr.status+"")[0];if("0"!==code&&"2"!==code&&"3"!==code)return void self._emit("loaderror",null,"Failed loading audio file with status: "+xhr.status+".");decodeAudioData(xhr.response,self)},xhr.onerror=function(){self._webAudio&&(self._html5=!0,self._webAudio=!1,self._sounds=[],delete cache[url],self.load())},safeXhrSend(xhr)}},safeXhrSend=function(xhr){try{xhr.send()}catch(e){xhr.onerror()}},decodeAudioData=function(arraybuffer,self){var error=function(){self._emit("loaderror",null,"Decoding audio data failed.")},success=function(buffer){buffer&&self._sounds.length>0?(cache[self._src]=buffer,loadSound(self,buffer)):error()};"undefined"!=typeof Promise&&1===Howler.ctx.decodeAudioData.length?Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error):Howler.ctx.decodeAudioData(arraybuffer,success,error)},loadSound=function(self,buffer){buffer&&!self._duration&&(self._duration=buffer.duration),0===Object.keys(self._sprite).length&&(self._sprite={__default:[0,1e3*self._duration]}),"loaded"!==self._state&&(self._state="loaded",self._emit("load"),self._loadQueue())},setupAudioContext=function(){try{"undefined"!=typeof AudioContext?Howler.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?Howler.ctx=new webkitAudioContext:Howler.usingWebAudio=!1}catch(e){Howler.usingWebAudio=!1}var iOS=/iP(hone|od|ad)/.test(Howler._navigator&&Howler._navigator.platform),appVersion=Howler._navigator&&Howler._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),version=appVersion?parseInt(appVersion[1],10):null;if(iOS&&version&&version<9){var safari=/safari/.test(Howler._navigator&&Howler._navigator.userAgent.toLowerCase());(Howler._navigator&&Howler._navigator.standalone&&!safari||Howler._navigator&&!Howler._navigator.standalone&&!safari)&&(Howler.usingWebAudio=!1)}Howler.usingWebAudio&&(Howler.masterGain=void 0===Howler.ctx.createGain?Howler.ctx.createGainNode():Howler.ctx.createGain(),Howler.masterGain.gain.setValueAtTime(Howler._muted?0:1,Howler.ctx.currentTime),Howler.masterGain.connect(Howler.ctx.destination)),Howler._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:Howler,Howl:Howl}}),"undefined"!=typeof exports&&(exports.Howler=Howler,exports.Howl=Howl),"undefined"!=typeof window?(window.HowlerGlobal=HowlerGlobal,window.Howler=Howler,window.Howl=Howl,window.Sound=Sound):"undefined"!=typeof global&&(global.HowlerGlobal=HowlerGlobal,global.Howler=Howler,global.Howl=Howl,global.Sound=Sound)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(pan){var self=this;if(!self.ctx||!self.ctx.listener)return self;for(var i=self._howls.length-1;i>=0;i--)self._howls[i].stereo(pan);return self},HowlerGlobal.prototype.pos=function(x,y,z){var self=this;return self.ctx&&self.ctx.listener?(y="number"!=typeof y?self._pos[1]:y,z="number"!=typeof z?self._pos[2]:z,"number"!=typeof x?self._pos:(self._pos=[x,y,z],void 0!==self.ctx.listener.positionX?(self.ctx.listener.positionX.setTargetAtTime(self._pos[0],Howler.ctx.currentTime,.1),self.ctx.listener.positionY.setTargetAtTime(self._pos[1],Howler.ctx.currentTime,.1),self.ctx.listener.positionZ.setTargetAtTime(self._pos[2],Howler.ctx.currentTime,.1)):self.ctx.listener.setPosition(self._pos[0],self._pos[1],self._pos[2]),self)):self},HowlerGlobal.prototype.orientation=function(x,y,z,xUp,yUp,zUp){var self=this;if(!self.ctx||!self.ctx.listener)return self;var or=self._orientation;return y="number"!=typeof y?or[1]:y,z="number"!=typeof z?or[2]:z,xUp="number"!=typeof xUp?or[3]:xUp,yUp="number"!=typeof yUp?or[4]:yUp,zUp="number"!=typeof zUp?or[5]:zUp,"number"!=typeof x?or:(self._orientation=[x,y,z,xUp,yUp,zUp],void 0!==self.ctx.listener.forwardX?(self.ctx.listener.forwardX.setTargetAtTime(x,Howler.ctx.currentTime,.1),self.ctx.listener.forwardY.setTargetAtTime(y,Howler.ctx.currentTime,.1),self.ctx.listener.forwardZ.setTargetAtTime(z,Howler.ctx.currentTime,.1),self.ctx.listener.upX.setTargetAtTime(x,Howler.ctx.currentTime,.1),self.ctx.listener.upY.setTargetAtTime(y,Howler.ctx.currentTime,.1),self.ctx.listener.upZ.setTargetAtTime(z,Howler.ctx.currentTime,.1)):self.ctx.listener.setOrientation(x,y,z,xUp,yUp,zUp),self)},Howl.prototype.init=function(_super){return function(o){var self=this;return self._orientation=o.orientation||[1,0,0],self._stereo=o.stereo||null,self._pos=o.pos||null,self._pannerAttr={coneInnerAngle:void 0!==o.coneInnerAngle?o.coneInnerAngle:360,coneOuterAngle:void 0!==o.coneOuterAngle?o.coneOuterAngle:360,coneOuterGain:void 0!==o.coneOuterGain?o.coneOuterGain:0,distanceModel:void 0!==o.distanceModel?o.distanceModel:"inverse",maxDistance:void 0!==o.maxDistance?o.maxDistance:1e4,panningModel:void 0!==o.panningModel?o.panningModel:"HRTF",refDistance:void 0!==o.refDistance?o.refDistance:1,rolloffFactor:void 0!==o.rolloffFactor?o.rolloffFactor:1},self._onstereo=o.onstereo?[{fn:o.onstereo}]:[],self._onpos=o.onpos?[{fn:o.onpos}]:[],self._onorientation=o.onorientation?[{fn:o.onorientation}]:[],_super.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(pan,id){var self=this;if(!self._webAudio)return self;if("loaded"!==self._state)return self._queue.push({event:"stereo",action:function(){self.stereo(pan,id)}}),self;var pannerType=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===id){if("number"!=typeof pan)return self._stereo;self._stereo=pan,self._pos=[pan,0,0]}for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){var sound=self._soundById(ids[i]);if(sound){if("number"!=typeof pan)return sound._stereo;sound._stereo=pan,sound._pos=[pan,0,0],sound._node&&(sound._pannerAttr.panningModel="equalpower",sound._panner&&sound._panner.pan||setupPanner(sound,pannerType),"spatial"===pannerType?void 0!==sound._panner.positionX?(sound._panner.positionX.setValueAtTime(pan,Howler.ctx.currentTime),sound._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),sound._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):sound._panner.setPosition(pan,0,0):sound._panner.pan.setValueAtTime(pan,Howler.ctx.currentTime)),self._emit("stereo",sound._id)}}return self},Howl.prototype.pos=function(x,y,z,id){var self=this;if(!self._webAudio)return self;if("loaded"!==self._state)return self._queue.push({event:"pos",action:function(){self.pos(x,y,z,id)}}),self;if(y="number"!=typeof y?0:y,z="number"!=typeof z?-.5:z,void 0===id){if("number"!=typeof x)return self._pos;self._pos=[x,y,z]}for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){var sound=self._soundById(ids[i]);if(sound){if("number"!=typeof x)return sound._pos;sound._pos=[x,y,z],sound._node&&(sound._panner&&!sound._panner.pan||setupPanner(sound,"spatial"),void 0!==sound._panner.positionX?(sound._panner.positionX.setValueAtTime(x,Howler.ctx.currentTime),sound._panner.positionY.setValueAtTime(y,Howler.ctx.currentTime),sound._panner.positionZ.setValueAtTime(z,Howler.ctx.currentTime)):sound._panner.setOrientation(x,y,z)),self._emit("pos",sound._id)}}return self},Howl.prototype.orientation=function(x,y,z,id){var self=this;if(!self._webAudio)return self;if("loaded"!==self._state)return self._queue.push({event:"orientation",action:function(){self.orientation(x,y,z,id)}}),self;if(y="number"!=typeof y?self._orientation[1]:y,z="number"!=typeof z?self._orientation[2]:z,void 0===id){if("number"!=typeof x)return self._orientation;self._orientation=[x,y,z]}for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++){var sound=self._soundById(ids[i]);if(sound){if("number"!=typeof x)return sound._orientation;sound._orientation=[x,y,z],sound._node&&(sound._panner||(sound._pos||(sound._pos=self._pos||[0,0,-.5]),setupPanner(sound,"spatial")),void 0!==sound._panner.orientationX?(sound._panner.orientationX.setValueAtTime(x,Howler.ctx.currentTime),sound._panner.orientationY.setValueAtTime(y,Howler.ctx.currentTime),sound._panner.orientationZ.setValueAtTime(z,Howler.ctx.currentTime)):sound._panner.setOrientation(x,y,z)),self._emit("orientation",sound._id)}}return self},Howl.prototype.pannerAttr=function(){var o,id,sound,self=this,args=arguments;if(!self._webAudio)return self;if(0===args.length)return self._pannerAttr;if(1===args.length){if("object"!=typeof args[0])return sound=self._soundById(parseInt(args[0],10)),sound?sound._pannerAttr:self._pannerAttr;o=args[0],void 0===id&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),self._pannerAttr={coneInnerAngle:void 0!==o.pannerAttr.coneInnerAngle?o.pannerAttr.coneInnerAngle:self._coneInnerAngle,coneOuterAngle:void 0!==o.pannerAttr.coneOuterAngle?o.pannerAttr.coneOuterAngle:self._coneOuterAngle,coneOuterGain:void 0!==o.pannerAttr.coneOuterGain?o.pannerAttr.coneOuterGain:self._coneOuterGain,distanceModel:void 0!==o.pannerAttr.distanceModel?o.pannerAttr.distanceModel:self._distanceModel,maxDistance:void 0!==o.pannerAttr.maxDistance?o.pannerAttr.maxDistance:self._maxDistance,refDistance:void 0!==o.pannerAttr.refDistance?o.pannerAttr.refDistance:self._refDistance,rolloffFactor:void 0!==o.pannerAttr.rolloffFactor?o.pannerAttr.rolloffFactor:self._rolloffFactor,panningModel:void 0!==o.pannerAttr.panningModel?o.pannerAttr.panningModel:self._panningModel})}else 2===args.length&&(o=args[0],id=parseInt(args[1],10));for(var ids=self._getSoundIds(id),i=0;i<ids.length;i++)if(sound=self._soundById(ids[i])){var pa=sound._pannerAttr;pa={coneInnerAngle:void 0!==o.coneInnerAngle?o.coneInnerAngle:pa.coneInnerAngle,coneOuterAngle:void 0!==o.coneOuterAngle?o.coneOuterAngle:pa.coneOuterAngle,coneOuterGain:void 0!==o.coneOuterGain?o.coneOuterGain:pa.coneOuterGain,distanceModel:void 0!==o.distanceModel?o.distanceModel:pa.distanceModel,maxDistance:void 0!==o.maxDistance?o.maxDistance:pa.maxDistance,refDistance:void 0!==o.refDistance?o.refDistance:pa.refDistance,rolloffFactor:void 0!==o.rolloffFactor?o.rolloffFactor:pa.rolloffFactor,panningModel:void 0!==o.panningModel?o.panningModel:pa.panningModel};var panner=sound._panner;panner?(panner.coneInnerAngle=pa.coneInnerAngle,panner.coneOuterAngle=pa.coneOuterAngle,panner.coneOuterGain=pa.coneOuterGain,panner.distanceModel=pa.distanceModel,panner.maxDistance=pa.maxDistance,panner.refDistance=pa.refDistance,panner.rolloffFactor=pa.rolloffFactor,panner.panningModel=pa.panningModel):(sound._pos||(sound._pos=self._pos||[0,0,-.5]),setupPanner(sound,"spatial"))}return self},Sound.prototype.init=function(_super){return function(){var self=this,parent=self._parent;self._orientation=parent._orientation,self._stereo=parent._stereo,self._pos=parent._pos,self._pannerAttr=parent._pannerAttr,_super.call(this),self._stereo?parent.stereo(self._stereo):self._pos&&parent.pos(self._pos[0],self._pos[1],self._pos[2],self._id)}}(Sound.prototype.init),Sound.prototype.reset=function(_super){return function(){var self=this,parent=self._parent;return self._orientation=parent._orientation,self._stereo=parent._stereo,self._pos=parent._pos,self._pannerAttr=parent._pannerAttr,self._stereo?parent.stereo(self._stereo):self._pos?parent.pos(self._pos[0],self._pos[1],self._pos[2],self._id):self._panner&&(self._panner.disconnect(0),self._panner=void 0,parent._refreshBuffer(self)),_super.call(this)}}(Sound.prototype.reset);var setupPanner=function(sound,type){type=type||"spatial","spatial"===type?(sound._panner=Howler.ctx.createPanner(),sound._panner.coneInnerAngle=sound._pannerAttr.coneInnerAngle,sound._panner.coneOuterAngle=sound._pannerAttr.coneOuterAngle,sound._panner.coneOuterGain=sound._pannerAttr.coneOuterGain,sound._panner.distanceModel=sound._pannerAttr.distanceModel,sound._panner.maxDistance=sound._pannerAttr.maxDistance,sound._panner.refDistance=sound._pannerAttr.refDistance,sound._panner.rolloffFactor=sound._pannerAttr.rolloffFactor,sound._panner.panningModel=sound._pannerAttr.panningModel,void 0!==sound._panner.positionX?(sound._panner.positionX.setValueAtTime(sound._pos[0],Howler.ctx.currentTime),sound._panner.positionY.setValueAtTime(sound._pos[1],Howler.ctx.currentTime),sound._panner.positionZ.setValueAtTime(sound._pos[2],Howler.ctx.currentTime)):sound._panner.setPosition(sound._pos[0],sound._pos[1],sound._pos[2]),void 0!==sound._panner.orientationX?(sound._panner.orientationX.setValueAtTime(sound._orientation[0],Howler.ctx.currentTime),sound._panner.orientationY.setValueAtTime(sound._orientation[1],Howler.ctx.currentTime),sound._panner.orientationZ.setValueAtTime(sound._orientation[2],Howler.ctx.currentTime)):sound._panner.setOrientation(sound._orientation[0],sound._orientation[1],sound._orientation[2])):(sound._panner=Howler.ctx.createStereoPanner(),sound._panner.pan.setValueAtTime(sound._stereo,Howler.ctx.currentTime)),sound._panner.connect(sound._node),sound._paused||sound._parent.pause(sound._id,!0).play(sound._id,!0)}}();
//# sourceMappingURL=library.min.js.map
