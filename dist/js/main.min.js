Site={animationSpeed:50,mobileThreshold:601,init:function(){var _this=this;$(window).resize(function(){_this.onResize()}),$(document).ready(function(){}),_this.HomeAnimation.init(),null!==WP.audio&&_this.Audio.init()},beforeAjax:function(){this.HomeAnimation.clearAnimation()},afterAjax:function(){this.HomeAnimation.init()},onResize:function(){var _this=this;$(".animation-image").length&&_this.HomeAnimation.getAndSetMaxImageSize()},fixWidows:function(){$(".js-fix-widows").each(function(){var string=$(this).html();string=string.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(string)})},shuffleArray:function(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),temp=array[i];array[i]=array[j],array[j]=temp}}},Site.HomeAnimation={active:!1,paused:!1,nextImage:0,numberOfFirstLoadImages:6,requestDelay:250,animationSpeed:250,minImages:3,preloadedImages:0,init:function(){var _this=this;_this.$animation=$("#home-animation"),_this.images=WP.animationImages,_this.headerLogoTop=$("#header-item-venice"),_this.headerNavLeft=$("#header-item-left"),_this.images.length>0&&(Site.shuffleArray(_this.images),_this.requestFirstImages(),_this.getAndSetMaxImageSize())},bindPauses:function(){var _this=this;$(".animation-image").off().on({mouseover:function(){_this.paused=!0},mouseout:function(){_this.paused=!1},touchstart:function(){_this.paused=!0},touchend:function(){_this.paused=!1}})},requestFirstImages:function(){for(var _this=this,i=0;i<_this.numberOfFirstLoadImages;i++)_this.addImage(i)},loadNextImage:function(){var _this=this;_this.images[_this.nextImage]&&_this.addImage(_this.nextImage)},addImage:function(imageIndex){var _this=this,srcset=_this.generateSrcset(_this.images[imageIndex]);_this.$animation.append('<img src="'+_this.images[imageIndex][1e3]+'" srcset="'+srcset+'" id="animation-image-'+imageIndex+'" class="animation-image" />'),$("#animation-image-"+imageIndex).bind("load",function(){$(this).addClass("animation-image-loaded"),_this.setMaxImageSize(),_this.bindPauses(),_this.preloadedImages++,!_this.active&&_this.preloadedImages>=_this.minImages&&($(".animation-image-loaded").first().addClass("active"),_this.bindPauses(),_this.animate()),window.setTimeout(function(){_this.loadNextImage()},_this.requestDelay)}),_this.nextImage++},animate:function(){var _this=this;_this.active=!0,_this.animationInterval=setInterval(function(){if(!_this.paused){var $active=$(".animation-image-loaded.active"),index=$active.index(".animation-image-loaded"),$next=$(".animation-image-loaded").eq(index+1);$active.removeClass("active"),$next.length?$next.addClass("active"):$(".animation-image-loaded").first().addClass("active")}},_this.animationSpeed)},clearAnimation:function(){var _this=this;_this.active=!1,_this.paused=!1,_this.nextImage=0,_this.animationInterval&&window.clearInterval(_this.animationInterval)},getAndSetMaxImageSize:function(){var _this=this,paddingTop=parseInt(_this.headerLogoTop.css("padding-top")),paddingSide=_this.headerNavLeft.offset().left,logoHeight=2*(_this.headerLogoTop.height()+2*paddingTop),navWidth=2*(_this.headerNavLeft.width()+2*paddingSide);_this.imageMaxHeight=$(window).height()-logoHeight,_this.imageMaxWidth=$(window).width()-navWidth,_this.setMaxImageSize()},setMaxImageSize:function(){var _this=this;$(".animation-image").css({"max-height":_this.imageMaxHeight+"px","max-width":_this.imageMaxWidth+"px"})},generateSrcset:function(image){var srcset="";for(var property in image)image.hasOwnProperty(property)&&(srcset+=image[property]+" "+property+"w, ");return srcset=srcset.substr(0,srcset.length-2)}},Site.Audio={isLooped:!1,isAutoplay:!1,isPlaying:!1,init:function(){var _this=this;"on"===WP.audio.audio_loop_boolean&&(_this.isLooped=!0),"on"===WP.audio.audio_autoplay_boolean&&(_this.isAutoplay=!0),_this.createPlayer()},createPlayer:function(){var _this=this;_this.player=new Howl({src:[WP.audio.audio_file],autoplay:_this.isAutoplay,loop:_this.isLooped,volume:.9,onload:function(){_this.isInitialized=!0},onplay:function(){_this.isPlaying=!0},onpause:function(){_this.isPlaying=!1}})}},Site.init(),Ajaxy={ajaxyLinks:"a",init:function(){var _this=this;_this.bind(),window.onpopstate=function(){_this.ajaxLoad(document.location.origin+document.location.pathname)}},bind:function(){var _this=this;$(_this.ajaxyLinks).click(function(event){event.preventDefault();var url=event.currentTarget.href;$("#main-content").addClass("main-content-hidden"),$("html, body").animate({scrollTop:0},Site.animationSpeed),_this.ajaxLoad(url)})},ajaxLoad:function(url){var _this=this;$.ajax(url,{beforeSend:function(){_this.ajaxBefore()},dataType:"html",error:function(jqXHR,textStatus){_this.ajaxErrorHandler(jqXHR,textStatus)},success:function(data){_this.ajaxSuccess(data,url),$("#main-content").removeClass("main-content-hidden")}})},ajaxErrorHandler:function(jqXHR,textStatus){alert(textStatus),console.log(jqXHR)},ajaxBefore:function(){$("#main-content").html(""),Site.beforeAjax()},ajaxSuccess:function(data,url){var _this=this;_this.responseHtml=document.createElement("html"),_this.responseHtml.innerHTML=data,$(window).off("resize"),$(window).off("scroll"),$(document).off("keydown");var bodyClasses=$("body",_this.responseHtml).attr("class"),title=$("title",_this.responseHtml).text(),$content=$("#main-content",_this.responseHtml),contentClasses=$("#main-content",_this.responseHtml).attr("class"),$header=$("#header",_this.responseHtml);history.pushState(null,title,url),document.title=title,$("body").removeAttr("class").addClass(bodyClasses),$("#main-content").html($content.html()).removeAttr("class").addClass(contentClasses),$("#header").html($header.html()),Site.afterAjax(),_this.bind()}},Ajaxy.init();
//# sourceMappingURL=main.min.js.map
